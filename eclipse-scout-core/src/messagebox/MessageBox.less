/*
 * Copyright (c) 2010-2021 BSI Business Systems Integration AG.
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 *
 * Contributors:
 *     BSI Business Systems Integration AG - initial API and implementation
 */
.messagebox {
  position: absolute;
  top: 0;
  left: 0;
  min-width: 200px;
  max-width: @messagebox-max-width;
  #scout.drop-shadow-large();
  background-color: @messagebox-background-color;
  border-radius: @border-radius-medium;
  overflow: hidden;
  margin: 10px /* minimum padding to desktop */ 10px 15px;

  &.full-height.full-width {
    border-radius: 0;
  }

  .severity-button(@color, @hover-color: darken(@color, 6%), @active-color: darken(@color, 13%), @focus-color: @focus-box-shadow-color) {
    & > .box-buttons > .box-button {
      border-color: @color;
      color: @color;

      &:focus {
        box-shadow: none; /* remove default behavior of buttons. Here the keyboard-navigation class is used instead */
      }

      &.keyboard-navigation {
        #scout.focus-border(@box-shadow-color: @focus-color, @border-color: mix(@color, @focus-color, 25%));
      }

      &.disabled {
        color: @button-disabled-color;
        border-color: @button-disabled-border-color;
      }

      &.default {
        color: @default-button-color;
        background-color: @color;

        &:hover {
          background-color: @hover-color;
          border-color: @hover-color;
        }

        &.active, &:active {
          background-color: @active-color;
          border-color: @active-color;
        }

        &.keyboard-navigation {
          #scout.focus-border(@box-shadow-color: @focus-color, @border-color: mix(@color, @focus-color, 25%));
        }

        &.disabled {
          color: @button-disabled-color;
          border-color: @button-disabled-border-color;
          background-color: @button-disabled-background-color;
        }
      }
    }
  }

  &.info {
    & > .messagebox-content > .messagebox-header {
      color: @info-color;

      & > .font-icon.messagebox-icon {
        .notification-font-icon-style(@info-color, 14px);
      }
    }

    .severity-button(@info-color, @default-button-hover-background-color, @default-button-active-background-color);
  }

  &.error {
    & > .messagebox-content > .messagebox-header {
      color: @error-color;

      & > .font-icon.messagebox-icon {
        .notification-font-icon-style(@error-color, 14px);
      }
    }

    .severity-button(@error-color, @focus-color: @error-focus-box-shadow-color);
  }

  &.warning {
    & > .messagebox-content > .messagebox-header {
      color: @warning-color;

      & > .font-icon.messagebox-icon {
        .notification-font-icon-style(@warning-color, 14px);
      }
    }

    .severity-button(@warning-color, @focus-color: @warning-focus-box-shadow-color);
  }

  &.ok {
    & > .messagebox-content > .messagebox-header {
      color: @ok-color;

      & > .font-icon.messagebox-icon {
        .notification-font-icon-style(@ok-color, 14px);
      }
    }

    .severity-button(@ok-color, @focus-color: @ok-focus-box-shadow-color);
  }

  &.animate-open {
    #scout.animation-name(short-drop);
    #scout.animation-duration(0.5s);
  }

  &.animate-modality-highlight {
    #scout.animation-shake();
  }
}

.messagebox-content {
  min-height: 30px;
  background-color: @messagebox-background-color;
  padding: @messagebox-label-padding 26px 17px 26px;

  /* add a bit of extra space to the scrollbar on the right */

  & > .scrollbar.y-axis {
    width: @scrollbar-size + 2;
  }
}

.messagebox-icon {
  width: 24px;
  height: 24px;
  display: inline-flex;
  align-items: center;
  font-size: @font-size-smaller;
  justify-content: center;
  flex-shrink: 0;
}

.messagebox-label {
  word-wrap: break-word;
  text-align: center;

  &.messagebox-html {
    padding-top: 10px;

    & > ul {
      display: flex;
      text-align: left;
      flex-direction: column;
      flex-wrap: wrap;
      align-content: center;
    }
  }
}

.copyable {
  #scout.user-select(text);
}

.messagebox-header {
  font-size: @font-size-large;
  font-weight: @font-weight-bold;
  padding-bottom: 16px;

  &.has-text > .messagebox-icon {
    margin-right: 12px;
  }
}

.messagebox-body {
  color: @messagebox-body-color;
}

.messagebox-buttons {
  display: flex;
  justify-content: center;
  padding: 4px 26px 25px 26px;
}

@media (max-width: @messagebox-max-width) {
  .messagebox {
    /* reduce message box width on small screens */
    max-width: 330px;
    /* no need to have a margin on small screens */
    margin: 0;

    & > .messagebox-buttons {
      padding-left: 10px;
      padding-right: 10px;

      & > .box-button {
        min-width: 70px; /* less min width for buttons on small screens */
        margin-right: 8px;

        &:last-child {
          margin-right: 0;
        }
      }
    }
  }
}
